scalar UserSocialId
scalar UserId

type UserSocial {
  id: UserSocialId!
  email: String!
  name: String
  socialType: String!
  pictureUrl: String
  createdAt: String!
  updatedAt: String!
}

type User {
  id: UserId!
  firstName: String!
  lastName: String!
  email: String!
  pictureUrl: String
  birthday: String
  isEnabled: Boolean!
  createdAt: String!
  updatedAt: String!
  socials: [UserSocial!]
}

type PendingEmailChange {
  newEmail: String!
  expiredAt: String!
}

type UserEmailSettings {
  dailyNewItemNotification: Boolean!
}

union GetCurrentUserResult = User | UnauthorizedRejection | ForbiddenRejection | InternalErrorRejection

union GetPendingEmailChangeResult =
  | PendingEmailChange
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection

union GetUserEmailSettingsResult =
  | UserEmailSettings
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection

extend type Query {
  getCurrentUser: GetCurrentUserResult!
  getPendingEmailChange: GetPendingEmailChangeResult
  getUserEmailSettings: GetUserEmailSettingsResult!
}

input RegisterUserInput {
  firstname: String!
  lastname: String!
  email: String!
  password: String!
  birthday: String
}

input LinkUserToGoogleInput {
  code: String!
}

input UpdateUserProfileInput {
  firstname: String!
  lastname: String!
  birthday: String
}

input ChangeUserPasswordInput {
  oldPassword: String!
  newPassword: String!
}

input UpdateUserPictureFromSocialInput {
  socialId: UserSocialId!
}

input RequestEmailChangeInput {
  newEmail: String!
}

input ConfirmEmailChangeInput {
  newEmail: String!
  token: String!
}

input UpdateUserEmailSettingsInput {
  dailyNewItemNotification: Boolean!
}

input SendResetPasswordEmailInput {
  email: String!
}

input ResetPasswordInput {
  email: String!
  token: String!
  newPassword: String!
}

union RegisterUserResult =
  | User
  | ValidationRejection
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection

union LinkUserToGoogleResult =
  | UserSocial
  | ValidationRejection
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection

union UpdateUserProfileResult =
  | User
  | ValidationRejection
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection

union UnlinkCurrentUserSocialResult =
  | VoidOutput
  | ValidationRejection
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection

union ChangeUserPasswordResult =
  | VoidOutput
  | ValidationRejection
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection

union UpdateUserPictureFromSocialResult =
  | VoidOutput
  | ValidationRejection
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection

union RemoveUserPictureResult =
  | VoidOutput
  | ValidationRejection
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection

union RequestEmailChangeResult =
  | VoidOutput
  | ValidationRejection
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection

union ConfirmEmailChangeResult =
  | VoidOutput
  | ValidationRejection
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection

union UpdateUserEmailSettingsResult =
  | UserEmailSettings
  | ValidationRejection
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection

union SendResetPasswordEmailResult =
  | VoidOutput
  | ValidationRejection
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection

union ResetPasswordResult =
  | VoidOutput
  | ValidationRejection
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection

extend type Mutation {
  registerUser(input: RegisterUserInput!): RegisterUserResult!
  linkCurrentUserlWithGoogle(input: LinkUserToGoogleInput!): LinkUserToGoogleResult!
  unlinkCurrentUserSocial(socialId: UserSocialId!): UnlinkCurrentUserSocialResult!
  updateUserProfile(input: UpdateUserProfileInput!): UpdateUserProfileResult!
  changeUserPassword(input: ChangeUserPasswordInput!): ChangeUserPasswordResult!
  updateUserPictureFromSocial(input: UpdateUserPictureFromSocialInput!): UpdateUserPictureFromSocialResult!
  removeUserPicture: RemoveUserPictureResult!
  requestEmailChange(input: RequestEmailChangeInput!): RequestEmailChangeResult!
  confirmEmailChange(input: ConfirmEmailChangeInput!): ConfirmEmailChangeResult!
  updateUserEmailSettings(input: UpdateUserEmailSettingsInput!): UpdateUserEmailSettingsResult!
  sendResetPasswordEmail(input: SendResetPasswordEmailInput!): SendResetPasswordEmailResult!
  resetPassword(input: ResetPasswordInput!): ResetPasswordResult!
}
