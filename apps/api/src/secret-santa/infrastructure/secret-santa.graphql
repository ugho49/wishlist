scalar SecretSantaId
scalar SecretSantaUserId

enum SecretSantaStatus {
  CREATED
  STARTED
}

type SecretSanta {
  id: SecretSantaId!
  description: String
  budget: Float
  status: SecretSantaStatus!
  eventId: EventId!
  event: Event! @resolved
  users: [SecretSantaUser!]! @resolved
  createdAt: String!
  updatedAt: String!
}

type SecretSantaUser {
  id: SecretSantaUserId!
  attendeeId: AttendeeId!
  attendee: EventAttendee! @resolved
  exclusionIds: [SecretSantaUserId!]!
  exclusions: [SecretSantaUser!]! @resolved
}

########################################################
###############   Input Types   ########################
########################################################

input CreateSecretSantaInput {
  eventId: EventId!
  description: String
  budget: Float
}

input UpdateSecretSantaInput {
  description: String
  budget: Float
}

input AddSecretSantaUsersInput {
  attendeeIds: [AttendeeId!]!
}

input UpdateSecretSantaUserInput {
  exclusionIds: [SecretSantaUserId!]!
}

########################################################
###############   Output Types   #######################
########################################################

type AddSecretSantaUsersOutput {
  users: [SecretSantaUser!]!
}

type GetSecretSantaDrawForEventOutput {
  attendee: EventAttendee
}

union GetSecretSantaByEventResult =
  | SecretSanta
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection
  | NotFoundRejection

union GetSecretSantaDrawForEventResult =
  | GetSecretSantaDrawForEventOutput
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection
  | NotFoundRejection

union CreateSecretSantaResult =
  | SecretSanta
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection
  | ValidationRejection

union UpdateSecretSantaResult =
  | VoidOutput
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection
  | ValidationRejection

union StartSecretSantaResult = VoidOutput | UnauthorizedRejection | ForbiddenRejection | InternalErrorRejection

union CancelSecretSantaResult = VoidOutput | UnauthorizedRejection | ForbiddenRejection | InternalErrorRejection

union DeleteSecretSantaResult = VoidOutput | UnauthorizedRejection | ForbiddenRejection | InternalErrorRejection

union AddSecretSantaUsersResult =
  | AddSecretSantaUsersOutput
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection
  | ValidationRejection

union UpdateSecretSantaUserResult =
  | VoidOutput
  | UnauthorizedRejection
  | ForbiddenRejection
  | InternalErrorRejection
  | ValidationRejection

union DeleteSecretSantaUserResult = VoidOutput | UnauthorizedRejection | ForbiddenRejection | InternalErrorRejection

########################################################
###############   Queries   ###########################
########################################################

extend type Query {
  getSecretSantaForEvent(eventId: EventId!): GetSecretSantaByEventResult
  getSecretSantaDrawForEvent(eventId: EventId!): GetSecretSantaDrawForEventResult
}

########################################################
###############   Mutations   ##########################
########################################################

extend type Mutation {
  createSecretSanta(input: CreateSecretSantaInput!): CreateSecretSantaResult
  updateSecretSanta(id: SecretSantaId!, input: UpdateSecretSantaInput!): UpdateSecretSantaResult
  startSecretSanta(id: SecretSantaId!): StartSecretSantaResult
  cancelSecretSanta(id: SecretSantaId!): CancelSecretSantaResult
  deleteSecretSanta(id: SecretSantaId!): DeleteSecretSantaResult
  addSecretSantaUsers(id: SecretSantaId!, input: AddSecretSantaUsersInput!): AddSecretSantaUsersResult
  updateSecretSantaUser(
    secretSantaId: SecretSantaId!
    secretSantaUserId: SecretSantaUserId!
    input: UpdateSecretSantaUserInput!
  ): UpdateSecretSantaUserResult
  deleteSecretSantaUser(
    secretSantaId: SecretSantaId!
    secretSantaUserId: SecretSantaUserId!
  ): DeleteSecretSantaUserResult
}
